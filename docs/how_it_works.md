### Как работает шаблонизатор?

1. Нужна входная(root) функция трансформации, в которую будет передаваться контекст (Map data) и шаблон. Эта функци будет вызываться рекурсивно в некоторых случаях (например при обработке блочных helper функций)

1. Думается мне, что процесс шаблонизации (работы root функции) должен состоять из последовательных вызовов методов, каждый из которых отвечает за преобразование отдельных типов сущностей
    1. Допустим, первым в дело вступает функция обработки блочных хелперов. Напомним, что каждая хелпер-функция должна возвращать строку, которая в последствии будет интегрирована в результирующий шаблон. Так вот, функция обработки блочных хелперов проходит по всему шаблону и пытается по регулярному выражению выцепить все вызовы блочных хелперов. Далее для каждого такого хелпера будеты вызван соответсвующая helper-функция из зарегистрированных с передачей в нее всех параметров в виде массива, а так же передачей функции-трансформера вторым параметром (в качестве шаблона данной функции будет выступать тело блочного хелпера). По хорошему нужно прогнать результат helper-функции через шаблонизатор, но возможно это лишнее.
    2. Вторым шагом происходит вызов неблочных helper-функций. Тут все просто - вызов заменяется на результат работы функции.
    3. Далее идут 